<!doctype html>
<html lang="bg">
<head>
    <meta charset="utf-8" />
	<script type="text/javascript" src="../../js/jquery.min.js"></script>
	<script type="text/javascript" src="../jquery.viframes.js"></script>
	<script>
		$(document).ready(function(){
			var inputkey = 'input1';

			$('#form1').live('submit', function(){
				// sava a input
				$.viset(inputkey, $('input[name="field1"]').val());

				// save a textarea
				$.viset('textareavalue', $('textarea[name="txtarea"]').val());

				// save all selects
				$.each($('select'), function(){
					$.viset('select' + $(this).attr('name'), $(this).val());
				});

				return true;
			});

			// load a input
			var inputtxt = $.viget(inputkey);
			if(inputtxt){
				$('input[name="field1"]').val(inputtxt);
			}

			// clear the saved input
			$.viclear(inputkey);

			// load a textarea
			var txt = $.viget('textareavalue');
			if(txt){
				$('textarea[name="txtarea"]').val(txt);
			}

			// how ro get all select boxes
			$.each($('select'), function(){
				$(this).find('option[value="' + $.viget('select' + $(this).attr('name')) + '"]').attr('selected', true);
			});
		});
	</script>
</head>
<body>
	<form id="form1" action="" method="post">
		<input type="text" name="field1" />
		<textarea name="txtarea"></textarea>
		<select name="sel1">
			<option value="nope" selected="selected"></option>
			<option value="x">xxx</option>
			<option value="y">yyy</option>
			<option value="z">zzz</option>
		</select>
		<br />
		<input type="submit" name="submit_button" />
	</form>
</body>
</html>
